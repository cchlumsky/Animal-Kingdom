<!DOCTYPE html>
<html lang="en">
	<head>
		<title><strong>Study Friend Finder</strong></title>

		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="author" content="Julie Hoffman">

		<!-- Link to current min version of bootstrap and jquery library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
   <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>

	</head>

		<body>
			<!-- Begin the bootstrap container -->
			<div class="container">

				<h2>Survey Questions:</h2>
				<hr>

				<!-- Begin user input -->
				<h3><strong>ABOUT YOU</strong></h3>
				<h4>Name (Required)</h4>
				<input type="text" name="" id="name" class="form-control" required >

				<h4>Link to Photo Image (Required)</h4>
				<input type="text" name="" id="photo" class="form-control" required >

				<hr>

				<!-- Begin 10 survey questions with dropdown selections of 1 (strongly disagree) to 5 (strongly agree) -->
				<h3><strong>Question 1</strong></h3>
				<h4>In general, you consider yourself a constant learner.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q1">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

				<h3><strong>Question 2</strong></h3>
				<h4>You prefer to use a Windows laptop rather than a Mac.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q2">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>


				<h3><strong>Question 3</strong></h3>
				<h4>You find it easy to stay relaxed and focused even when there is a homework deadline to meet.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q3">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>


				<h3><strong>Question 4</strong></h3>
				<h4>You prefer to play loud music when you study.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q4">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>


				<h3><strong>Question 5</strong></h3>
				<h4>You are comfortable with long silences.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q5">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>


				<h3><strong>Question 6</strong></h3>
				<h4>It is annoying to hear someone eating during a study session.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q6">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>


				<h3><strong>Question 7</strong></h3>
				<h4>You are flexible as to the day and time to meet for a study session.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q7">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

				<h3><strong>Question 8</strong></h3>
				<h4>You communicate as soon as you know you will be late (rarely) to a meeting.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q8">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

				<h3><strong>Question 9</strong></h3>
				<h4>You think that everyoneâ€™s views should be respected as there is more than one way to accomplish a task.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q9">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

				<h3><strong>Question 10</strong></h3>
				<h4>You appreciate learning a new perspective and sharing your knowledge.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q10">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

				<br>
				<br>

				<!-- Submit Button -->
				<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
					<i class="fa fa-check-circle" aria-hidden="true"></i>
		 		SUBMIT</button>

			<!-- End the bootstrap container -->
			</div>

			<!-- Modal -->
			<div id="resultsModal" class="modal fade" role="dialog">
			  <div class="modal-dialog">

			    <!-- Modal content-->
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal">&times;</button>
			        <h2 class="modal-title"><strong>Your Best Study Friend Match!</strong></h2>
			      </div>
			      <div class="modal-body">
			        <h2 id="matchName"></h2>
			        <img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			      </div>
			    </div>

			  </div>
			</div>

			 <script type="text/javascript">
		  	// Chosen CSS method
		    var config = {
		      '.chosen-select'           : {},
		      '.chosen-select-deselect'  : {allow_single_deselect:true},
		      '.chosen-select-no-single' : {disable_search_threshold:10},
		      '.chosen-select-no-results': {no_results_text:'Oops, Nothing Found!'},
		      '.chosen-select-width'     : {width:"95%"}
		    }
		    // Loop over
		    for (var selector in config) {
		      $(selector).chosen(config[selector]);
		    }
		    // Collect the user inputs on the form when the submit button is clicked
		    $("#submit").on("click", function(){
		    	// Form validator function
		    	function validateForm() {
				  var isValid = true;
				  $('.form-control').each(function() {
				    if ( $(this).val() === '' )
				        isValid = false;
				  });
				  $('.chosen-select').each(function() {
				  	if( $(this).val() === "")
				  		isValid = false
				  })
				  return isValid;
				}
				// If all user input fields on the form are filled in
				if (validateForm() == true)
				{
					// Create an object  to hold the user's input or data
			    	var userData = {
			    		name: $("#name").val(),
			    		photo: $("#photo").val(),
			    		scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
			    	}
			    	// Grab the URL of the website
			    	var currentURL = window.location.origin;
			    	// AJAX POST to the data to the friends.js API.
			    	$.post(currentURL + "/api/friends", userData, function(data){
			    		// Grab the result from the AJAX post so that the best match's name and photo are displayed.
			    		$("#matchName").text(data.name);
			    		$('#matchImg').attr("src", data.photo);
				    	// Show the modal window with the best match
				    	$("#resultsModal").modal('toggle');
			    	});
				}
				else
				{
					alert("Please fill out all fields before submitting the survey!");
				}

		    	return false;
		    });
		  	</script>

</body>
</html>
